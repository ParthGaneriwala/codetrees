@Test
@DirtiesContext
public void createDeleteTask() {
    beginHttpSession();
    beginHttpRequestAndOpenSessionInViewFilter();
    CrudRootServiceHelper<DbTutorialConfig> tutorialCrud = tutorialService.getDbTutorialCrudRootServiceHelper();
    DbTutorialConfig dbTutorialConfig = tutorialCrud.createDbChild();
    endHttpRequestAndOpenSessionInViewFilter();
    beginHttpRequestAndOpenSessionInViewFilter();
    dbTutorialConfig = tutorialService.getDbTutorialCrudRootServiceHelper().readDbChild(dbTutorialConfig.getId());
    CrudChildServiceHelper<DbTaskConfig> crudChildServiceHelper = dbTutorialConfig.getDbTaskConfigCrudChildServiceHelper();
    DbTaskConfig dbTaskConfig = crudChildServiceHelper.createDbChild();
    ruTutorialServiceHelper.updateDbEntity(dbTutorialConfig);
    endHttpRequestAndOpenSessionInViewFilter();
    beginHttpRequestAndOpenSessionInViewFilter();
    dbTutorialConfig = ruTutorialServiceHelper.readDbChild(dbTutorialConfig.getId(), DbTutorialConfig.class);
    dbTaskConfig = dbTutorialConfig.getDbTaskConfigCrudChildServiceHelper().readDbChild(dbTaskConfig.getId());
    dbTaskConfig.setFinishedImageContentType("finish");
    dbTaskConfig.setAccountBalance(100);
    dbTaskConfig.setName("name1");
    dbTaskConfig.setClearGame(true);
    dbTaskConfig.setScroll(new Index(1, 2));
    dbTaskConfig.setOptionAllowed(true);
    dbTaskConfig.setScrollingAllowed(true);
    dbTaskConfig.setSellingAllowed(true);
    dbTaskConfig.setFinishImageDuration(500);
    dbTaskConfig.setFinishImageData(new byte[] { 1, 2, 3, 4 });
    dbTaskConfig.setHouseCount(5);
    dbTaskConfig.setTaskText("task text");
    ruTutorialServiceHelper.updateDbEntity(dbTutorialConfig);
    endHttpRequestAndOpenSessionInViewFilter();
    beginHttpRequestAndOpenSessionInViewFilter();
    dbTutorialConfig = ruTutorialServiceHelper.readDbChild(dbTutorialConfig.getId(), DbTutorialConfig.class);
    dbTaskConfig = dbTutorialConfig.getDbTaskConfigCrudChildServiceHelper().readDbChild(dbTaskConfig.getId());
    dbTaskConfig.setFinishedImageContentType("finish");
    dbTaskConfig.setAccountBalance(100);
    dbTaskConfig.setName("name1");
    dbTaskConfig.setClearGame(true);
    dbTaskConfig.setScroll(new Index(1, 2));
    dbTaskConfig.setOptionAllowed(true);
    dbTaskConfig.setScrollingAllowed(true);
    dbTaskConfig.setSellingAllowed(true);
    dbTaskConfig.setFinishImageDuration(500);
    dbTaskConfig.setFinishImageData(new byte[] { 1, 2, 3, 4 });
    dbTaskConfig.setHouseCount(5);
    dbTaskConfig.setTaskText("task text");
    ruTaskServiceHelper.updateDbEntity(dbTaskConfig);
    endHttpRequestAndOpenSessionInViewFilter();
    beginHttpRequestAndOpenSessionInViewFilter();
    dbTutorialConfig = ruTutorialServiceHelper.readDbChild(dbTutorialConfig.getId(), DbTutorialConfig.class);
    dbTaskConfig = dbTutorialConfig.getDbTaskConfigCrudChildServiceHelper().readDbChild(dbTaskConfig.getId());
    Assert.assertEquals("finish", dbTaskConfig.getFinishedImageContentType());
    Assert.assertEquals(100, dbTaskConfig.getAccountBalance());
    Assert.assertEquals("name1", dbTaskConfig.getName());
    Assert.assertTrue(dbTaskConfig.isClearGame());
    Assert.assertEquals(new Index(1, 2), dbTaskConfig.getScroll());
    Assert.assertTrue(dbTaskConfig.isOptionAllowed());
    Assert.assertTrue(dbTaskConfig.isScrollingAllowed());
    Assert.assertTrue(dbTaskConfig.isSellingAllowed());
    Assert.assertEquals(500, dbTaskConfig.getFinishImageDuration());
    Assert.assertArrayEquals(new byte[] { 1, 2, 3, 4 }, dbTaskConfig.getFinishImageData());
    Assert.assertEquals(5, dbTaskConfig.getHouseCount());
    Assert.assertEquals("task text", dbTaskConfig.getTaskText());
    endHttpRequestAndOpenSessionInViewFilter();
    endHttpSession();
}
