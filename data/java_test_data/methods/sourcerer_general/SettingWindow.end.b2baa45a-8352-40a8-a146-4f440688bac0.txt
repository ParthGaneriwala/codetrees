public void end() {
    // Setting s = LocalSettingManager.getManager().getSetting(aDatabaseManager);
    Setting s = new Setting();
    s.personalDN = displayNameField.getText();
    s.personalPM = personalMessageField.getText();
    s.personalFP = picturePathField.getText();
    s.personalIM = Integer.parseInt(inavticeMinuteField.getText());
    s.layoutSF = showFavoriteBox.isSelected();
    s.layoutSG = showGroupBox.isSelected();
    s.layoutOB = Setting.ORGANIZE_BY[organizeByBox.getSelectedIndex()];
    s.layoutBC = Setting.BACKGROUND_COLOR[backgroundColorBox.getSelectedIndex()];
    s.alertCO = onlineBox.isSelected();
    s.alertCF = offlineBox.isSelected();
    s.alertRM = receiveMessageBox.isSelected();
    s.alertRE = receiveEmailBox.isSelected();
    s.fileFP = folderPathField.getText();
    s.fileAJ = enableAutoRejectBox.isSelected();
    s.fileAR = enableAutoReceiveBox.isSelected();
    s.fileMS = Integer.parseInt(maxSizeField.getText());
    s.fontTF = Setting.TEXT_FONT[textFontBox.getSelectedIndex()];
    s.fontFS = Setting.FONT_STYLE[fontStyleBox.getSelectedIndex()];
    s.fontFZ = Integer.parseInt(fontSizeField.getText());
    s.fontTC = Setting.TEXT_COLOR[textColorBox.getSelectedIndex()];
    // LocalSettingManager.getManager().saveSetting();
    pdb.setPropertiesDatabase(s);
    list.updatePersonalMessageField(personalMessageField.getText());
    list.updatePicturePathField(picturePathField.getText());
    list.updateStatus(pdb.loadStatus());
    this.validate();
    this.setVisible(false);
}
