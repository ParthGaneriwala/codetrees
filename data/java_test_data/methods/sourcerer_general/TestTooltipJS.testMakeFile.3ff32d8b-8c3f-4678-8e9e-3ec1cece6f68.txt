// --------------------------------------------------------------------------
@Test
public void testMakeFile() throws IOException {
    TooltipJS tooltip = new TooltipJS();
    // TODO
    tooltip.setMaxWidth(300);
    // tooltip.setShadowWidth(0); //TODO
    HTMLDoc htmlDoc = new HTMLDoc();
    htmlDoc.setDoctype(Doctype.HTML_4_01_TRANSITIONAL_NO_URL);
    // htmlDoc.setDoctype(Doctype.XHTML_1_0_TRANSITIONAL);
    HTML html = new HTML();
    htmlDoc.setRootNode(html);
    html.getHead().setTitle("TooltipJS Examples");
    html.getHead().addSubtag(Meta.CONTENT_TYPE_ISO_8859_1);
    html.getHead().addJavascript(tooltip.generateJS());
    Body body = html.getBody();
    body.addCenter().addSpan("TooltipJS Examples").setStyle(CSS.BOLD + CSS.fontSize(24));
    body.br(2);
    Span testSpan = body.addSpan("Test span w/ short tooltip");
    tooltip.addTooltip(testSpan, new Span("I'm short").toHTML());
    body.br(2);
    Pre tooltip1Content = new Pre("foobar and all that stuff\n");
    tooltip1Content.addSpan("just grinds my axe!\n").setStyle(CSS.BOLD + CSS.fontSize(24));
    testSpan = body.addSpan("Test span");
    tooltip.addTooltip(testSpan, tooltip1Content.toHTML());
    body.br(2);
    testSpan = body.addSpan("Test w/ pre'd exception");
    ByteArrayOutputStream byteArrayStream = new ByteArrayOutputStream();
    PrintStream stream = new PrintStream(byteArrayStream);
    new RuntimeException("test exception").printStackTrace(stream);
    stream.close();
    tooltip.addTooltip(testSpan, new Pre(new String(byteArrayStream.toByteArray())).toHTML());
    body.br(2);
    testSpan = body.addDiv().setStyle("width: 100%; text-align: right;").addSpan("Test w/ pre'd exception");
    byteArrayStream = new ByteArrayOutputStream();
    stream = new PrintStream(byteArrayStream);
    new RuntimeException("test exception").printStackTrace(stream);
    stream.close();
    tooltip.addTooltip(testSpan, new Pre(new String(byteArrayStream.toByteArray())).toHTML());
    body.br(2);
    Table tooltip2Content = new Table();
    Tr row = tooltip2Content.addRow();
    row.addCell(tooltip1Content);
    row.addCell().addImage("penguin.gif").setWidth(50);
    Span testSpan2 = body.addTable().setWidth("100%").addRow().addCell().setAlign(Align.RIGHT).addSpan("Test span2 (contains table & image)");
    tooltip.addTooltip(testSpan2, tooltip2Content.toHTML());
    body.br(2);
    Span testSpan3 = body.addTable().setWidth("100%").addRow().addCell().setAlign(Align.CENTER).addSpan("Test span3 (no pre)");
    tooltip.addTooltip(testSpan3, "foobar and all that stuff\n   just grinds my axe!\n     You know what I mean?\n     You know what I mean?\n                     nudge, nudge, wink, wink");
    body.br(2);
    Span testSpan4 = body.addTable().setWidth("100%").addRow().addCell().setAlign(Align.CENTER).addSpan("Test span4 (no pre with onmousemove())");
    tooltip.setMouseMove(true);
    tooltip.addTooltip(testSpan4, "foobar and all that stuff\n   just grinds my axe!\n     You know what I mean?\n     You know what I mean?\n                     nudge, nudge, wink, wink");
    tooltip.setMouseMove(false);
    body.br(2);
    Span testSpan5 = body.addTable().setWidth("100%").addRow().addCell().setAlign(Align.CENTER).addSpan("Test span5 (Tricky quoted content)");
    tooltip.setMouseMove(true);
    tooltip.addTooltip(testSpan5, "\"Final\" rearray of all confirmed uniques & Reps plus remaining\n" + "unsequenced clones.  Controls: A1=N24-3, B2=N24-21, G11=Neg1, H12=Neg2");
    tooltip.setMouseMove(false);
    body.br(2);
    Link testLink = body.addLink("javascript:void(0);", "Test Link");
    tooltip.addTooltip(testLink, "foobar and all that stuff\n   just grinds my axe!\n     You know what I mean?\n     You know what I mean?\n                     nudge, nudge, wink, wink");
    body.br(2);
    body.addSpan("Menu option 2 should have a tooltip. (At least in Firefox.)");
    Select menu = body.addForm().addSelect("foobar");
    menu.addOption("Option 1");
    Option option = menu.addOption("Option 2");
    tooltip.addTooltip(option, "foobar and all that stuff\n   just grinds my axe!\n     You know what I mean?\n     You know what I mean?\n                     nudge, nudge, wink, wink");
    body.br(2);
    testLink = body.addLink("javascript:void(0);", "Test TitleTooltip on Link").setTitle("A test of addTitleTooltip().\n:-)");
    tooltip.addTitleTooltip(testLink);
    body.br(2);
    testLink = body.addLink("javascript:void(0);", "Test Span TitleTooltip on Link").setTitle("<span>A test of addTitleTooltip().\n:-)</span>");
    tooltip.addTitleTooltip(testLink);
    body.br(2);
    testLink = body.addLink("javascript:void(0);", "Test Longer TitleTooltip on a Link").setTitle("A test of addTitleTooltip() with a loooooooonger message. Where will it end?\n:-)");
    tooltip.addTitleTooltip(testLink);
    body.br(2);
    testLink = body.addLink("javascript:void(0);", "Test TitleTooltip with tricky content").setTitle("\"Final\" rearray of all confirmed uniques & Reps plus remaining\n" + "unsequenced clones.  Controls: A1=N24-3, B2=N24-21, G11=Neg1, H12=Neg2");
    tooltip.addTitleTooltip(testLink);
    body.br(2);
    testLink = body.addLink("javascript:void(0);", "Test TitleTooltip on Link w/o title (Should not display tooltip)");
    tooltip.addTitleTooltip(testLink);
    body.br(2);
    testLink = body.addLink("javascript:void(0);", "Test TitleTooltip on Link w/ empty title (Should not display tooltip)").setTitle("");
    tooltip.addTitleTooltip(testLink);
    body.br(2);
    testLink = body.addLink("javascript:void(0);", "Test TitleTooltip on Link w/ nbsp title (Should not display tooltip)").setTitle("&nbsp;");
    tooltip.addTitleTooltip(testLink);
    File testFile = new File(TestUtil.getProjectRootDir(), "src/com/hfg/javascript/doc-files/tooltipTest.html");
    PrintWriter writer = new PrintWriter(new FileWriter(testFile));
    htmlDoc.toIndentedHTML(writer, 2, 2);
    writer.close();
}
