public void test1() throws Exception {
    HTMLDoc doc = new HTMLDoc();
    doc.setDoctype(Doctype.XHTML_1_0_TRANSITIONAL);
    HTML html = new HTML("CommonJS Test");
    doc.setRootNode(html);
    html.getHead().addStyleTag(".header {font-size: 1.2em; font-weight: bold; }");
    html.getHead().addStyleTag(".answer {color: #ff0000; font-style: italic; }");
    html.getHead().addJavascript(CommonJS.generateDomSearchJS());
    Body body = html.getBody();
    body.addSpan("Would you like to be able use regular expressions to search for attribute names and vaules?").setClass("header");
    body.br();
    body.addSpan("Would you like to be able to scope getElementById() to a subsection of the document's DOM tree?").setClass("header");
    body.br();
    body.addSpan("Well now you can!").setClass("header");
    body.br(3);
    body.addSpan("Test Span 1 (id=1)").setId("1");
    body.br();
    body.addSpan("Test Span 2 (id=12)").setId("12");
    body.addTable().setId("table1").setBorder(1).addRow().addCell().addSpan("Test Span 3 (id=1)").setId("1");
    body.br(3);
    Form form = body.addForm();
    form.addButton("", "Click to test").setOnClick("alert(domSearch().getElementsByTagNameAndAttribute('*', '^id$', '^1$').length);");
    form.addPre("domSearch().getElementsByTagNameAndAttribute('*', '^id$', '^1$').length  ").addSpan("[Answer should be 2]").setClass("answer");
    form.br(3);
    form.addButton("", "Click to test").setOnClick("alert(domSearch(document).getElementsByTagNameAndAttribute('*', '^id$', '^1').length);");
    form.addPre("domSearch(document).getElementsByTagNameAndAttribute('*', '^id$', '^1').length  ").addSpan("[Answer should be 3]").setClass("answer");
    form.br(3);
    form.addButton("", "Click to test").setOnClick("alert(domSearch(document.getElementById('table1')).getElementsByTagNameAndAttribute('*', '^id$', '^1$').length);");
    form.addPre("domSearch(document.getElementById('table1')).getElementsByTagNameAndAttribute('*', '^id$', '^1$').length  ").addSpan("[Answer should be 1]").setClass("answer");
    form.br(3);
    form.addButton("", "Click to test").setOnClick("alert(domSearch(document.getElementById('table1')).getElementsByTagNameAndAttribute('*', '^id$').length);");
    form.addPre("domSearch(document.getElementById('table1')).getElementsByTagNameAndAttribute('*', '^id$').length  ").addSpan("[Answer should be 1]").setClass("answer");
    form.br(3);
    form.addButton("", "Click to test").setOnClick("alert(domSearch(document.getElementById('table1')).getElementsByTagNameAndAttribute('span', '^id$').length);");
    form.addPre("domSearch(document.getElementById('table1')).getElementsByTagNameAndAttribute('span', '^id$').length  ").addSpan("[Answer should be 1]").setClass("answer");
    form.br(3);
    form.addButton("", "Click to test").setOnClick("alert(domSearch(document.getElementById('table1')).getElementById('1').childNodes[0].nodeValue);");
    form.addPre("domSearch(document.getElementById('table1')).getElementById('1').childNodes[0].nodeValue)  ").addSpan("[Answer should be 'Test Span 3 (id=1)']").setClass("answer");
    form.br(3);
    // Test XMLHttpRequest methods
    html.getHead().addJavascript(CommonJS.generateXMLHttpRequestJS());
    html.getHead().addJavascript(generateJS());
    form.addButton("", "Click to test").setOnClick("makeXMLHttpRequest('test.xml', testHandler)");
    form.addPre("XMLHttpRequest test (Won't work if accessing as file://)");
    // Write out the html file
    File file = new File("src/com/hfg/javascript/doc-files/CommonJSTest.html");
    PrintWriter writer = new PrintWriter(new FileWriter(file));
    doc.toIndentedHTML(writer, 0, 2);
    writer.close();
}
