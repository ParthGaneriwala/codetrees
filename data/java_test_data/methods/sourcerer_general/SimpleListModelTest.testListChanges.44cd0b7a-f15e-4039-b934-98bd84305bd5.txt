public void testListChanges() {
    ObservableList<String> list = new ObservableList<String>(new ArrayList<String>());
    SimpleListModel listModel = new SimpleListModel(list);
    TestListDataListener listener = new TestListDataListener();
    listModel.addListDataListener(listener);
    list.add("a");
    assertEquals(INTERVAL_ADDED, listener.lastMethod);
    assertEquals(0, listener.lastEvent.getIndex0());
    assertEquals(0, listener.lastEvent.getIndex1());
    list.add("b");
    assertEquals(INTERVAL_ADDED, listener.lastMethod);
    assertEquals(1, listener.lastEvent.getIndex0());
    assertEquals(1, listener.lastEvent.getIndex1());
    list.add("c");
    assertEquals(INTERVAL_ADDED, listener.lastMethod);
    assertEquals(2, listener.lastEvent.getIndex0());
    assertEquals(2, listener.lastEvent.getIndex1());
    list.set(1, "d");
    assertEquals(CONTENTS_CHANGED, listener.lastMethod);
    assertEquals(1, listener.lastEvent.getIndex0());
    assertEquals(1, listener.lastEvent.getIndex1());
    list.remove(1);
    assertEquals(INTERVAL_REMOVED, listener.lastMethod);
    assertEquals(1, listener.lastEvent.getIndex0());
    assertEquals(1, listener.lastEvent.getIndex1());
    List<String> list1 = new ArrayList<String>();
    list1.add("e");
    list1.add("f");
    list.addAll(list1);
    assertEquals(4, list.size());
    assertEquals(INTERVAL_ADDED, listener.lastMethod);
    assertEquals(2, listener.lastEvent.getIndex0());
    assertEquals(3, listener.lastEvent.getIndex1());
    list.removeAll(list1);
    assertEquals(2, list.size());
    assertEquals(CONTENTS_CHANGED, listener.lastMethod);
    assertEquals(-1, listener.lastEvent.getIndex0());
    assertEquals(-1, listener.lastEvent.getIndex1());
    list.addAll(1, list1);
    assertEquals(4, list.size());
    assertEquals(INTERVAL_ADDED, listener.lastMethod);
    assertEquals(1, listener.lastEvent.getIndex0());
    assertEquals(2, listener.lastEvent.getIndex1());
}
